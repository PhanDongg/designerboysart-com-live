<!-- /sections/main-page.liquid -->
{%- liquid
  assign animation_anchor = '#page--' | append: section.id
  assign color_scheme = 'color-' | append: section.settings.color_scheme
  assign image_banner = section.settings.image_banner
  assign overlay_opacity = section.settings.overlay_opacity | times: 0.01
  assign mobile_height = section.settings.mobile_height
  assign desktop_height = section.settings.height

  capture sizes
    if section.settings.width == 'wrapper--full'
      if image_1 and image_2
        echo '(min-width: 750px) 50vw, 100vw'
      else
        echo '100vw'
      endif
    else
      if image_1 and image_2
        echo '(min-width: 990px) calc((100vw - 100px) / 2), (min-width: 750px) calc((100vw - 60px) / 2), calc(100vw - 32px)'
      else
        echo '(min-width: 990px) calc(100vw - 100px), (min-width: 750px) calc(100vw - 60px), calc(100vw - 32px)'
      endif
    endif
  endcapture

  capture sizes_mobile
    if section.settings.width == 'wrapper--full'
      echo '100vw'
    else
      echo 'calc(100vw - 32px)'
    endif
  endcapture

-%}

{%- style -%}
  .index-page {
    --PT: {{ section.settings.padding_top }}px;
    --PB: {{ section.settings.padding_bottom }}px;
  }
{%- endstyle -%}

{%- if section.settings.show_content or section.settings.subheading != blank or section.settings.show_title -%}
  <section class="index-page section-padding wide-image {{ color_scheme }}"
    data-section-id="{{ section.id }}"
    data-section-type="page">
    {%- if image_banner != blank -%}
      <div class="hero__wrapper frame {{ section.settings.width }}">
          <div class="hero__images frame__item">
            <div class="hero__split-image">
              {%- render 'image-hero' image_desktop: image_banner, image_mobile: image_banner, sizes: sizes, desktop_height: desktop_height, mobile_height: mobile_height -%}
            </div>
            {%- unless overlay_opacity == 0.0 -%}
              <div class="image-overlay" style="--overlay-opacity: {{ overlay_opacity }};"></div>
            {%- endunless -%}
          </div>
    {% endif %}

      <div class="hero__content__wrapper {{ section.settings.align_text }} {{ section.settings.width }} {% if image_banner != blank %} frame__item  align--middle-center-desktop align--middle-center-mobile {% endif %}">
        <div class="hero__content hero__content--compact">
          {%- if section.settings.subheading != blank -%}
            <p class="hero__subheading"
              data-aos="hero"
              data-aos-anchor="{{ animation_anchor }}"
              data-aos-order="1">
              {{ section.settings.subheading }}
            </p>
          {%- endif -%}
          {%- if section.settings.show_title -%}
            {%- liquid
              assign heading_tag = 'h2'

              unless section.settings.heading_tag == 'automatic' or section.settings.heading_tag == blank
                assign heading_tag = section.settings.heading_tag
              endunless
            -%}

            <{{ heading_tag }} class="hero__title {{ section.settings.heading_font_size }}"
              data-aos="hero"
              data-aos-anchor="{{ animation_anchor }}"
              data-aos-order="2">
              {{ page.title }}
            </{{ heading_tag }}>
          {%- endif -%}
          {%- if section.settings.show_content -%}
            <div class="hero__rte {{ section.settings.text_font_size }}"
              data-aos="hero"
              data-aos-anchor="{{ animation_anchor }}"
              data-aos-order="3">
              <div class="rte">{{ page.content }}</div>
            </div>
          {%- endif -%}
        </div>
      </div>

    {%- if image_banner != blank or request.design_mode -%}
      </div>
    {% endif %}

  </section>
{%- endif -%}

{% schema %}
{
  "name": "Page",
  "class": "section-overlay-header transparent-hero-page-section",
  "settings": [
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "checkbox",
      "id": "show_title",
      "label": "Show title",
      "default": true
    },
    {
      "type": "select",
      "id": "heading_font_size",
      "label": "Heading size",
      "default": "heading-large",
      "options": [
        {"value": "heading-mini", "label": "Mini"},
        {"value": "heading-x-small", "label": "Extra small"},
        {"value": "heading-small", "label": "Small"},
        {"value": "heading-medium", "label": "Medium"},
        {"value": "heading-large", "label": "Large"},
        {"value": "heading-x-large", "label": "Extra large"}
      ]
    },
    {
      "type": "checkbox",
      "id": "show_content",
      "label": "Show content",
      "default": true
    },
    {
      "type": "select",
      "id": "text_font_size",
      "label": "Text size",
      "info": "Automatically generated by the base size. Applies only when content in Text field is set to Paragraph.",
      "default": "body-medium",
      "options": [
        {"value": "body-x-small", "label": "Extra small"},
        {"value": "body-small", "label": "Small"},
        {"value": "body-medium", "label": "Medium"},
        {"value": "body-large", "label": "Large"},
        {"value": "body-x-large", "label": "Extra large"}
      ]
    },
    {
      "type": "select",
      "id": "align_text",
      "label": "Text alignment",
      "default": "text-left",
      "options": [
        { "value": "text-left","label": "Left" },
        { "value": "text-center","label": "Centered" }
      ]
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "image_picker",
      "id": "image_banner",
      "label": "Banner image"
    }, 
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay opacity",
      "info": "Increase contrast for legible text.",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default":0
    },       
    {
      "type": "select",
      "id": "height",
      "label": "Desktop Height",
      "default": "screen-height-three-quarters",
      "options": [
        { "value": "image-height", "label": "Image height" },
        { "value": "screen-height-full", "label": "Full screen height"},
        { "value": "screen-height-three-quarters", "label": "3/4 of screen"},
        { "value": "screen-height-two-thirds", "label": "2/3 of screen"},
        { "value": "screen-height-one-half", "label": "1/2 of screen"},
        { "value": "screen-height-one-third", "label": "1/3 of screen"},
        { "value": "seven-fifty-height-hero", "label": "750px" },
        { "value": "sixty-fifty-height-hero", "label": "650px" },
        { "value": "five-fifty-height-hero ", "label": "550px" },
        { "value": "four-fifty-height-hero", "label": "450px" }
      ]
    },
    {
      "type": "select",
      "id": "mobile_height",
      "label": "Mobile Height",
      "default": "screen-height-three-quarters--mobile",
      "options": [
        { "value": "image-height--mobile", "label": "Image height" },
        { "value": "screen-height-full--mobile", "label": "Full screen height"},
        { "value": "screen-height-three-quarters--mobile", "label": "3/4 of screen"},
        { "value": "screen-height-two-thirds--mobile", "label": "2/3 of screen"},
        { "value": "screen-height-one-half--mobile", "label": "1/2 of screen"},
        { "value": "screen-height-one-third--mobile", "label": "1/3 of screen"},
        { "value": "seven-fifty-height-hero--mobile", "label": "750px" },
        { "value": "sixty-fifty-height-hero--mobile", "label": "650px" },
        { "value": "five-fifty-height-hero--mobile", "label": "550px" },
        { "value": "four-fifty-height-hero--mobile", "label": "450px" }
      ]
    },        
    {
      "type": "select",
      "id": "width",
      "label": "Width",
      "default": "wrapper",
      "options": [
        { "value": "wrapper--full-padded", "label": "Full width padded" },
        { "value": "wrapper", "label": "Normal" },
        { "value": "wrapper--narrow", "label": "Narrow" }
      ]
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "default": "scheme_1",
      "label": "Color scheme"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Top",
      "default": 50
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Bottom",
      "default": 50
    },
    {
      "type": "header",
      "content": "Advanced"
    },
    {
      "type": "select",
      "id": "heading_tag",
      "label": "Title SEO tag",
      "default": "automatic",
      "options": [
        {"value": "automatic", "label": "Automatic"},
        {"value": "h1", "label": "H1"},
        {"value": "h2", "label": "H2"},
        {"value": "h3", "label": "H3"},
        {"value": "h4", "label": "H4"},
        {"value": "h5", "label": "H5"},
        {"value": "h6", "label": "H6"}
      ]
    }
  ]
}
{% endschema %}
